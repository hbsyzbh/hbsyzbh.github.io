<!DOCTYPE html>
<html>
    <head>
        <title>时令水果蔬菜查询</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body onresize="resize()">
		<script src="jquery.min.js"></script>
        <script src="bootstrap3\js\bootstrap.js"></script>
        <link href="bootstrap3\css\bootstrap.css" rel="stylesheet">
<style type="text/css">
* {
	text-align: center;
}

.col-nextmore {
	float: left;
	width:25%;
}

@media (min-width: 600px) {
	.col-nextmore {
		width:11.11%;
	}
	
	.pre_next {
		width:12.5%;	
	}
	
	.m_f {
		width:25%;
	}

	.nomargin {
		width:50%;
	}
}

.title {
	width:50%;
	float: left;
	height:72px;
}

.nomargin {
    padding-right: 0;
    padding-left: 0;
}

#filter {
	width:100%;
	height:100%;
	font-size: 36px;
}
</style>
时令水果蔬菜查询
<div class="container">
<div class="row">
<div id="curTime" class="title col-lg-6">
当前系统不兼容此js脚本
</div>
<div class="title col-lg-6">
<input id="filter" placeholder="查询" oninput="filter_change()">
</div>
</div>
<div id="output">
</div>
</div>
	<script type="text/javascript">
	var d = new Date();
	var m = d.getMonth() + 1;
	var fruit = [];
	var lastWidth = 0;
	var tinyWindows = 600;

	function resize()
	{ 
		if (lastWidth == 0) return;
		if ((lastWidth  < tinyWindows) ^ (document.body.clientWidth < tinyWindows )) {
			filter_change();
		}
	}
	
	function filter_change()
	{
		//console.log($("#filter").val());
		show_result($("#filter").val());
	}

	function goodmonth(fm)
	{
		var count = 0;
		for (i in fm) {
			if (fm[i]) {
				count++;
			}
		}

		return count;
	}

	function show_result(filter)
	{
		$("#output").empty();
		$("#output").append("<div id='spliter' ></div>");
		for (f in fruit) {
			var f_div = makeFruitMonth(f,fruit[f],m);

			if ((filter == "") || (f.match(filter)))
			{
				if (fruit[f][m-1]) {
					if (1==goodmonth(fruit[f])){
						$("#spliter").before(f_div);
					} else {
						$("#spliter").after(f_div);
					}
				} else {
					$("#output").append(f_div);
				}
			}
		}
		
		lastWidth = document.body.clientWidth;
	}

	$(function(){
		$("#curTime").empty().append($("<h1></h1>").text(m + "月"))
		for (i = 0; i < monthly_fruit.length; i++) {
			for (f = 0; f < monthly_fruit[i]["fruit"].length; f++) {
				var cur_f = monthly_fruit[i]["fruit"][f];
				if (fruit[cur_f] == undefined)
					fruit[cur_f] = new Array(12).fill(false);

				fruit[cur_f][i] = true;
			}
		}

		show_result("");
	});

	function getPreMonth(m)
	{
		if (m == 1) {
			m = 12;
		} else {
			m = m - 1;
		}

		return m;
	}

	function getNextMonth(m)
	{
		if (m == 12) {
			m = 1;
		} else {
			m = m + 1;
		}

		return m;
	}
	
	function makeNextMore(fruit, monthes, m)
	{
		var more_class = "col-nextmore";
		var next_more = document.createElement("div");
		var cur_m = getNextMonth(m);
		var more_mounth = 4;
		
		if (document.body.clientWidth >= tinyWindows) {
			more_mounth = 9;
		}

		for (i = 0; i < more_mounth; i++){
			var tmp = document.createElement("div");

			cur_m = getNextMonth(cur_m);
			
			tmp.className = more_class;
			tmp.innerHTML = cur_m + "月";
			if (monthes[cur_m-1])
				tmp.style.backgroundColor = "green";
			next_more.append(tmp);
		}
		
		return next_more;
	}

	function makeFruitMonth(fruit, monthes, m)
	{
		var sum_class = "col-xs-2 col-sm-1 col-lg-1 pre_next"
		var m_class = "col-xs-4 col-sm-1 col-lg-1 m_f"

		var pre_m = document.createElement("div");
		var cur_m = document.createElement("div");
		var next_m = document.createElement("div");
		
		var f_div = document.createElement("div");

		pre_m.innerHTML = getPreMonth(m)+ "月";
		pre_m.className  += sum_class;
		if (monthes[getPreMonth(m)-1])
			pre_m.style.backgroundColor = "green";

		cur_m.innerHTML = fruit;
		cur_m.className  += m_class;
		if (monthes[m-1])
			cur_m.style.backgroundColor = "green";

		next_m.innerHTML = getNextMonth(m)+ "月";
		next_m.className  += sum_class;
		if (monthes[getNextMonth(m)-1])
			next_m.style.backgroundColor = "green";
			
		
		var nextmore = makeNextMore(fruit, monthes, m);
		nextmore.className  += "col-xs-4 col-sm-6 col-lg-6 nomargin";

		f_div.append(pre_m)
		f_div.append(cur_m)
		f_div.append(next_m)
		f_div.append(nextmore)
		f_div.className  += "row";
		return f_div;
	}


	var monthly_fruit_old = [
	{"fruit":["葡萄柚","木瓜","香蕉","樱桃","番茄","杨桃","柑橘橙","青枣","甘蔗","草莓","番石榴","牛奶蕉","柑桔","无花果"]},
	{"fruit":["葡萄柚","木瓜","香蕉","樱桃","杨桃","番荔枝","青枣","甘蔗","草莓","番石榴","牛奶蕉","柑桔"]},
	{"fruit":["葡萄柚","枇杷","香蕉","樱桃","杨桃","番荔枝","青枣","甘果蔗","草莓","番石榴","牛奶蕉","柑桔","桑葚","山竹"]},
	{"fruit":["桃子","枇杷","香蕉","樱桃","番茄","荔枝","甘蔗","桑葚","番石榴","牛奶蕉","澳州坚果","柠檬","山竹"]},
	{"fruit":["桃子","芒果","香蕉","樱桃","番茄","荔枝","番荔枝","桑葚","番石榴","牛奶蕉","李子","西瓜","桃","香瓜","柠檬","山竹"]},
	{"fruit":["桃子","苹果","芒果","香蕉","樱桃","番茄","荔枝","番荔枝","桑葚","番石榴","牛奶蕉","李子","西瓜","桃","香瓜","柠檬","菠萝","火龙果","油梨","青提","葡萄"]},
	{"fruit":["苹果","青提","葡萄","芒果","樱桃","番茄","荔枝","石榴","牛奶蕉","李子","西瓜","桃","香瓜","柠檬","菠萝","火龙果","龙眼","百香果","菠萝蜜"]},
	{"fruit":["苹果","梨","葡萄","芒果","红香蕉","木瓜","荔枝","杨桃","番龙眼","石榴","牛奶蕉","甜柿","西瓜","黑提子","香瓜","柠檬","菠萝蜜","澳州坚果菠萝","火龙果","油梨","龙眼","百香果"]},
	{"fruit":["苹果","哈密瓜","梨","葡萄","芒果","红香蕉","蓝莓木瓜","荔枝","百香果","杨桃","龙眼","石榴","牛奶蕉","甜柿","西瓜","黑提子","香瓜","柠檬","菠萝蜜","油梨","菠萝","火龙果"]},
	{"fruit":["牛油果","橘子","香蕉","鸡蛋果","木瓜","台湾甜玉米","百香果","杨桃","无花果","石榴","牛奶蕉","火龙果","西瓜","黑提子","人参果","柠檬","菠萝","油梨"]},
	{"fruit":["牛油果","西柚","橘子","香蕉","木瓜","百香果","杨桃","无花果","番石榴","牛奶蕉","火龙果","青枣","黑提子","柠檬","菠萝","油梨"]},
	{"fruit":["牛油果","西柚","橘子","香蕉","鸡蛋果","木瓜","草莓","百香果","杨桃","无花果","番石榴","牛奶蕉","柠檬","菠萝","油梨","柑橘","橙子"]}
	];

	var monthly_fruit = [
	{"fruit":["菠萝","甘蔗","砂糖橘","蛋黄果","番石榴","橙子","青枣","白菜","菠菜","彩椒","胡萝卜","小白菜","芥菜","平菇","蒜黄","香菇","杏鲍菇","紫菜","豆瓣菜","紫菜苔","腰果"]},
	{"fruit":["甘蔗","柠檬","圣女果","蛋黄果","番石榴","橙子","丑柑","青枣","白菜","彩椒","春笋","胡萝卜","韭菜","小白菜","芥菜","平菇","蒜黄","香菇","紫菜","豆瓣菜","紫菜苔","腰果"]},
	{"fruit":["柠檬","枇杷","圣女果","番石榴","橙子","丑柑","青枣","青梅","荸荠","彩椒","春笋","胡萝卜","韭菜","小白菜","芥菜","芦笋","平菇","蒜黄","茼蒿","香菇","香椿","紫菜","豆瓣菜","紫菜苔","腰果"]},
	{"fruit":["菠萝","火龙果","枇杷","圣女果","丑柑","青梅","菠菜","荸荠","彩椒","春笋","茶树菇","大葱","韭菜","蒜苔","西兰花","黄豆芽","荠菜","空心菜","芦笋","绿豆芽","平菇","青萝卜","蒜黄","茼蒿","莴苣","香菇","香椿","蟹味菇","紫菜","快菜","豌豆","鸡腿菇","草菇","竹荪","荷兰豆","银耳","腰果"]},
	{"fruit":["菠萝","草莓","火龙果","荔枝","枇杷","桑葚","山竹","樱桃","莲雾","嘉宝果","乌梅","青梅","白萝卜","菠菜","彩椒","春笋","茶树菇","大葱","韭菜","蒜苔","土豆","西兰花","圆白菜","洋葱","油菜","茴香","海带","黄豆芽","荠菜","苦瓜","空心菜","绿豆芽","平菇","青萝卜","生菜","莴苣","豌豆苗","苋菜","西葫芦","西芹","蟹味菇","猪肚菇","快菜","豌豆","鸡腿菇","草菇","竹荪","荷兰豆","银耳","蚕豆","腰果"]},
	{"fruit":["菠萝","草莓","黑莓","火龙果","蓝莓","荔枝","榴莲","桑葚","桃","山竹","杏","西瓜","香瓜","樱桃","杨梅","椰子","神秘果","释迦果","菠萝蜜","莲雾","红毛丹","树莓","蛇皮果","火参果","黑布林","黄皮果","伊丽莎白","乌梅","白萝卜","菠菜","彩椒","茶树菇","豆角","大葱","大蒜","黄瓜","茄子","土豆","西红柿","圆白菜","洋葱","油菜","茴香","海带","黄豆芽","尖椒","茭白","芥蓝","苦瓜","空心菜","绿豆芽","青萝卜","秋葵","丝瓜","生菜","四季豆","娃娃菜","豌豆苗","苋菜","香菜","西葫芦","西芹","紫甘蓝","毛豆","木耳菜","猪肚菇","快菜","豌豆","红薯叶","鸡腿菇","草菇","竹荪","黄花菜","牛肝菌","银耳","蚕豆"]},
	{"fruit":["苹果","菠萝","黑莓","火龙果","哈密瓜","龙眼","蓝莓","李子","荔枝","榴莲","芒果","蟠桃","桃","山竹","杏","西瓜","香瓜","油桃","杨梅","杨桃","椰子","释迦果","菠萝蜜","莲雾","红毛丹","树莓","火参果","嘉宝果","黑布林","黄皮果","伊丽莎白","西洋梨","白菜","菠菜","彩椒","茶树菇","豆角","大葱","大蒜","黄瓜","南瓜","茄子","土豆","西红柿","圆白菜","洋葱","猴头菇","海带","黄豆芽","尖椒","茭白","豇豆","芥蓝","苦瓜","空心菜","苦菊","菱角","绿豆芽","青萝卜","秋葵","丝瓜","山药","四季豆","娃娃菜","苋菜","香菜","西芹","紫甘蓝","玉米","毛豆","木耳菜","猪肚菇","快菜","红薯叶","草菇","黄花菜","牛肝菌","银耳","榛蘑","核桃","葵花子","夏威夷果"]},
	{"fruit":["苹果","百香果","黄桃","火龙果","哈密瓜","龙眼","蓝莓","李子","荔枝","榴莲","猕猴桃","木瓜","芒果","葡萄","蟠桃","青提","桃","沙果","山竹","无花果","西瓜","油桃","杨梅","杨桃","椰子","释迦果","菠萝蜜","牛油果","莲雾","红毛丹","火参果","黑布林","西梅","黄皮果","沙棘","羊角蜜","芭蕉","西洋梨","白菜","菠菜","豆角","冬瓜","大葱","大蒜","黄瓜","红薯","南瓜","茄子","圆白菜","猴头菇","海带","黄豆芽","尖椒","茭白","豇豆","荠菜","芥蓝","苦瓜","苦菊","口蘑","菱角","绿豆芽","青萝卜","芹菜","秋葵","丝瓜","山药","四季豆","苋菜","香菜","西芹","芋头","油麦菜","玉米","紫薯","毛豆","猪肚菇","牛蒡","快菜","红薯叶","草菇","黄花菜","牛肝菌","银耳","榛蘑","板栗","巴旦木","花生","核桃","葵花子","开心果","夏威夷果","榛子"]},
	{"fruit":["苹果","百香果","菇娘","红提","黄桃","海棠果","火龙果","哈密瓜","龙眼","蓝莓","李子","蜜柑","猕猴桃","木瓜","芒果","葡萄","蟠桃","青提","蛇果","沙果","柿子","山竹","石榴","无花果","西柚","香梨","梨","西瓜","杨桃","枣","人参果","释迦果","菠萝蜜","牛油果","人心果","蔓越莓","火参果","南果梨","冬枣","沙棘","羊角蜜","芭蕉","枣仁","西洋梨","菠菜","菜花","豆角","冬瓜","大辣椒","大蒜","红薯","姜","南瓜","圆白菜","油菜","猴头菇","茴香","海带","黄豆芽","尖椒","茭白","荠菜","芥蓝","芥菜","苦瓜","口蘑","莲藕","菱角","绿豆芽","青萝卜","芹菜","秋葵","秋黄瓜","丝瓜","生菜","山药","四季豆","香菜","西芹","芋头","油麦菜","玉米","紫薯","毛豆","猪肚菇","牛蒡","快菜","红薯叶","鸡腿菇","草菇","黄花菜","牛肝菌","银耳","腐竹","板栗","白果","巴旦木","榧子","花生","核桃","葵花子","开心果","松子","夏威夷果","榛子"]},
	{"fruit":["苹果","菠萝","百香果","橄榄","菇娘","红提","海棠果","火龙果","金橘","橘子","蜜柑","猕猴桃","木瓜","葡萄","脐橙","蛇果","柿子","山楂","石榴","无花果","西柚","香梨","梨","香蕉","柚子","枣","神秘果","人参果","释迦果","菠萝蜜","人心果","番石榴","蔓越莓","火参果","嘉宝果","南果梨","冬枣","橙子","沙棘","羊角蜜","芭蕉","枣仁","青枣","白菜","菠菜","百合","菜花","豆角","冬瓜","大辣椒","大蒜","胡萝卜","红薯","姜","木耳","南瓜","土豆","西兰花","圆白菜","油菜","茴香","黄豆芽","尖椒","茭白","荠菜","芥蓝","芥菜","苦瓜","莲藕","绿豆芽","魔芋","青萝卜","芹菜","秋葵","秋黄瓜","丝瓜","生菜","山药","四季豆","茼蒿","娃娃菜","香菜","雪莲果","芋头","油麦菜","蟹味菇","紫菜","紫甘蓝","玉米","紫薯","猪肚菇","快菜","豌豆","雪里红","鸡腿菇","草菇","牛肝菌","腐竹","板栗","碧根果","白果","榧子","花生","核桃","南瓜子","开心果","松子","夏威夷果","榛子"]},
	{"fruit":["苹果","菠萝","橄榄","甘蔗","菇娘","海棠果","火龙果","金橘","罗汉果","橘子","脐橙","砂糖橘","蛇果","山楂","香蕉","柚子","枣","人参果","释迦果","菠萝蜜","番石榴","蔓越莓","冬枣","橙子","芭蕉","青枣","白菜","菠菜","百合","胡萝卜","红薯","姜","木耳","土豆","西兰花","圆白菜","尖椒","金针菇","荠菜","芥蓝","芥菜","秋黄瓜","山药","蒜黄","茼蒿","娃娃菜","香菇","雪莲果","杏鲍菇","蟹味菇","紫菜","紫甘蓝","豆瓣菜","快菜","豌豆","雪里红","鸡腿菇","腐竹","碧根果","榧子","南瓜子"]},
	{"fruit":["菠萝","橄榄","甘蔗","罗汉果","橘子","砂糖橘","香蕉","蛋黄果","番石榴","嘉宝果","橙子","青枣","菠菜","胡萝卜","红薯","土豆","金针菇","芥菜","平菇","蒜黄","茼蒿","香菇","杏鲍菇","紫菜","豆瓣菜","紫菜苔","鸡腿菇"]},
	];
	</script>
</html>
