<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
		<script src="jquery.min.js"></script>
        <script src="bootstrap3\js\bootstrap.js"></script>
        <link href="bootstrap3\css\bootstrap.css" rel="stylesheet">
<style type="text/css">
* {
	text-align: center;
}

.col-nextmore {
	float: left;
	width:25%;
}

@media (min-width: 768px) {
.col-nextmore {
	width:11.11%;
}
}

.title {
	width:50%;
	float: left;
	height:72px;
}

.nomargin {
    padding-right: 0;
    padding-left: 0;
}

#filter {
	width:100%;
	height:100%;
	font-size: 36px;
}
</style>

<div class="container">
<div class="row">
<div id="curTime" class="title col-lg-6">
当前系统不兼容此js脚本
</div>
<div class="title col-lg-6">
<input id="filter" placeholder="过滤" oninput="filter_change()">
</div>
</div>
<div id="output">
</div>
</div>
	<script type="text/javascript">
	var d = new Date();
	var m = d.getMonth() + 1;
	var fruit = [];

	function filter_change()
	{
		//console.log($("#filter").val());
		show_result($("#filter").val());
	}

	function show_result(filter)
	{
		$("#output").empty();
		for (f in fruit) {
			var f_div = makeFruitMonth(f,fruit[f],m);

			if ((filter == "") || (f.match(filter)))
			{
				if (fruit[f][m-1])
					$("#output").prepend(f_div);
				else
					$("#output").append(f_div);
			}
		}
	}

	$(function(){
		$("#curTime").empty().append($("<h1></h1>").text(m + "月"))
		for (i = 0; i < monthly_fruit.length; i++) {
			for (f = 0; f < monthly_fruit[i]["fruit"].length; f++) {
				var cur_f = monthly_fruit[i]["fruit"][f];
				if (fruit[cur_f] == undefined)
					fruit[cur_f] = new Array(12).fill(false);

				fruit[cur_f][i] = true;
			}
		}
		
		show_result("");
	});

	function getPreMonth(m)
	{
		if (m == 1) {
			m = 12;
		} else {
			m = m - 1;
		}

		return m;
	}

	function getNextMonth(m)
	{
		if (m == 12) {
			m = 1;
		} else {
			m = m + 1;
		}

		return m;
	}
	
	function makeNextMore(fruit, monthes, m)
	{
		var more_class = "col-nextmore";
		var next_more = document.createElement("div");
		var cur_m = getNextMonth(m);
		var more_mounth = 4;
		
		if (document.body.clientWidth >= 768) {
			more_mounth = 9;
		}

		for (i = 0; i < more_mounth; i++){
			var tmp = document.createElement("div");

			cur_m = getNextMonth(cur_m);
			
			tmp.className = more_class;
			tmp.innerHTML = cur_m + "月";
			if (monthes[cur_m-1])
				tmp.style.backgroundColor = "green";
			next_more.append(tmp);
		}
		
		return next_more;
	}

	function makeFruitMonth(fruit, monthes, m)
	{
		var sum_class = "col-xs-2 col-sm-1 col-lg-1"
		var m_class = "col-xs-4 col-sm-1 col-lg-1"

		var pre_m = document.createElement("div");
		var cur_m = document.createElement("div");
		var next_m = document.createElement("div");
		
		var f_div = document.createElement("div");

		pre_m.innerHTML = getPreMonth(m)+ "月";
		pre_m.className  += sum_class;
		if (monthes[getPreMonth(m)-1])
			pre_m.style.backgroundColor = "green";

		cur_m.innerHTML = fruit;
		cur_m.className  += m_class;
		if (monthes[m-1])
			cur_m.style.backgroundColor = "green";

		next_m.innerHTML = getNextMonth(m)+ "月";
		next_m.className  += sum_class;
		if (monthes[getNextMonth(m)-1])
			next_m.style.backgroundColor = "green";
			
		
		var nextmore = makeNextMore(fruit, monthes, m);
		nextmore.className  += "col-xs-4 col-sm-6 col-lg-6 nomargin";

		f_div.append(pre_m)
		f_div.append(cur_m)
		f_div.append(next_m)
		f_div.append(nextmore)
		f_div.className  += "row";
		return f_div;
	}


	var monthly_fruit = [
	{"fruit":["葡萄柚","木瓜","香蕉","樱桃","番茄","杨桃","柑橘橙","青枣","甘蔗","草莓","番石榴","牛奶蕉","柑桔","无花果"]},
	{"fruit":["葡萄柚","木瓜","香蕉","樱桃","杨桃","番荔枝","青枣","甘蔗","草莓","番石榴","牛奶蕉","柑桔"]},
	{"fruit":["葡萄柚","枇杷","香蕉","樱桃","杨桃","番荔枝","青枣","甘果蔗","草莓","番石榴","牛奶蕉","柑桔","桑葚","山竹"]},
	{"fruit":["桃子","枇杷","香蕉","樱桃","番茄","荔枝","甘蔗","桑葚","番石榴","牛奶蕉","澳州坚果","柠檬","山竹"]},
	{"fruit":["桃子","芒果","香蕉","樱桃","番茄","荔枝","番荔枝","桑葚","番石榴","牛奶蕉","李子","西瓜","桃","香瓜","柠檬","山竹"]},
	{"fruit":["桃子","苹果","芒果","香蕉","樱桃","番茄","荔枝","番荔枝","桑葚","番石榴","牛奶蕉","李子","西瓜","桃","香瓜","柠檬","菠萝","火龙果","油梨","青提","葡萄"]},
	{"fruit":["苹果","青提","葡萄","芒果","樱桃","番茄","荔枝","石榴","牛奶蕉","李子","西瓜","桃","香瓜","柠檬","菠萝","火龙果","龙眼","百香果","菠萝蜜"]},
	{"fruit":["苹果","梨","葡萄","芒果","红香蕉","木瓜","荔枝","杨桃","番龙眼","石榴","牛奶蕉","甜柿","西瓜","黑提子","香瓜","柠檬","菠萝蜜","澳州坚果菠萝","火龙果","油梨","龙眼","百香果"]},
	{"fruit":["苹果","哈密瓜","梨","葡萄","芒果","红香蕉","蓝莓木瓜","荔枝","百香果","杨桃","龙眼","石榴","牛奶蕉","甜柿","西瓜","黑提子","香瓜","柠檬","菠萝蜜","油梨","菠萝","火龙果"]},
	{"fruit":["牛油果","橘子","香蕉","鸡蛋果","木瓜","台湾甜玉米","百香果","杨桃","无花果","石榴","牛奶蕉","火龙果","西瓜","黑提子","人参果","柠檬","菠萝","油梨"]},
	{"fruit":["牛油果","西柚","橘子","香蕉","木瓜","百香果","杨桃","无花果","番石榴","牛奶蕉","火龙果","青枣","黑提子","柠檬","菠萝","油梨"]},
	{"fruit":["牛油果","西柚","橘子","香蕉","鸡蛋果","木瓜","草莓","百香果","杨桃","无花果","番石榴","牛奶蕉","柠檬","菠萝","油梨","柑橘","橙子"]}
	]
	</script>
</html>
